<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>jsonata-functions - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <script src="https://embed.runkit.com"></script>
    <style>.embedrunkit { overflow: visible; }</style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/martinholden-skillsoft/jsonata-extended.git" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Modules</h3><ul><li><a href="module-jsonata-functions.html">jsonata-functions</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~htmltotext">htmltotext</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~languageInfo">languageInfo</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~moment">moment</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~momentDuration">momentDuration</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~mustache">mustache</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~parsePath">parsePath</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~parseUrl">parseUrl</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~registerWithJSONATA">registerWithJSONATA</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~shortenUuid">shortenUuid</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~truncate">truncate</a></li><li data-type='method' style='display: none;'><a href="module-jsonata-functions.html#~unicodeToASCII">unicodeToASCII</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#jsonataExtended">jsonataExtended</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">jsonata-functions</h1>
    

    




<section>

<header>
    
        
            
        
    
</header>

<article>
    
        <div class="container-overview">
        
            
                <div class="description usertext">Extension functions for JSONata</div>
            

            
                




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line1">line 1</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>
































            
        
        </div>
    

    

    

    
    
    

     

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="~htmltotext"><span class="type-signature">(private, inner) </span>htmltotext<span class="signature">(value, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {String|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line56">line 56</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/html-to-text">html-to-text NPM</a></li>
        
            <li><a href="https://www.npmjs.com/package/he">HE NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Convert HTML to plain text
</div>









    <h5>Example</h5>
    
        <p class="code-caption">Example usage within a JSONata transform. The &lt;p&gt; tags and the HTML entities are converted</p>
    
    <pre class="prettyprint"><code>// returns
// result = 'Leadership has a dark side; a "leadership shadow" that often creates an unknown; lurking fear.'
const jsonata = require('jsonata-extended');
const expr = jsonata('$htmltotext("&lt;p>Leadership has a dark side; a &amp;#34;leadership shadow&amp;#34; that often creates an unknown; lurking fear.&lt;/p>")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 'Leadership has a dark side; a "leadership shadow" that often creates an unknown; lurking fear.'
const jsonata = require('jsonata-extended');
const expr = jsonata('$htmltotext("&lt;p>Leadership has a dark side; a &amp;#34;leadership shadow&amp;#34; that often creates an unknown; lurking fear.&lt;/p>")');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The HTML string to convert</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">The options object. For more information see the <a href="https://www.npmjs.com/package/html-to-text">html-to-text NPM</a>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>tables</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>
|

<span class="param-type">String</span>
|

<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>[]</code>
                
                </td>
            

            <td class="description last">allows to select certain tables by the 'class' or 'id' attribute from the HTML document. This is necessary because the majority of HTML E-Mails uses a table based layout. Prefix your table selectors with an '.' for the 'class' and with a '#' for the 'id' attribute. All other tables are ignored. You can assign 'true' to this attribute to select all tables.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>wordwrap</code></td>
            

            <td class="type">
            
                
<span class="param-type">Number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>80</code>
                
                </td>
            

            <td class="description last">defines after how many chars a line break should follow in 'p' elements. Set to 'null' or 'false' to disable word-wrapping.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>linkHrefBaseUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>null</code>
                
                </td>
            

            <td class="description last">allows you to specify the server host for href attributes, where the links start at the root ('/'). For example, 'linkHrefBaseUrl = 'http://asdf.com'' and '<a href='/dir/subdir'>...</a>' the link in the text will be 'http://asdf.com/dir/subdir'. Keep in mind that 'linkHrefBaseUrl' shouldn't end with a '/'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>hideLinkHrefIfSameAsText</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">allows you to specify the server host for href attributes, where the links start at the root ('/'). For example, 'linkHrefBaseUrl = 'http://asdf.com'' and '<a href='/dir/subdir'>...</a>' the link in the text will be 'http://asdf.com/dir/subdir'. Keep in mind that 'linkHrefBaseUrl' shouldn't end with a '/'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>noLinkBrackets</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">dont print brackets around the link if 'true'</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ignoreHref</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">ignore all document links if 'true'</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>ignoreImage</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">ignore all document images if 'true'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>preserveNewlines</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">by default, any newlines \n in a block of text will be removed. If true, these newlines will not be removed.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>uppercaseHeadings</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last">by default, headings (h1, h2, etc) are uppercased. Set to 'false' to leave headings as they are.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>singleNewLineParagraphs</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">by default, paragraphs are converted with two newlines ('\n\n'). Set to 'true' to convert to a single newline.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>baseElement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>
|

<span class="param-type">Array.&lt;String></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>'body'</code>
                
                </td>
            

            <td class="description last">defines the tags whose text content will be captured from the html.  All content will be captured below the baseElement tags and added to the resulting text output.  This option allows the user to specify an array of elements as base elements using a single tag with css class and id parameters e.g. ['p.class1.class2#id1#id2', 'p.class1.class2#id1#id2'].</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>returnDomByDefault</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>true</code>
                
                </td>
            

            <td class="description last">onvert the entire document if we don't find the tag we're looking for if 'true'</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>unorderedListItemPrefix</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>' * '</code>
                
                </td>
            

            <td class="description last">defines the string that is used as item prefix for unordered lists '&lt;ol&gt;'</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>longWordSplit</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">describes how to wrap long words
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>wrapCharacters</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;String></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>[]</code>
                
                </td>
            

            <td class="description last">is an array containing the characters that may be wrapped on, these are used in order</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>forceWrapOnLimit</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">defines whether to break long words on the limit if 'true'</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>decodeOptions</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">defines the text decoding options given to 'he.decode'. For more informations see the <a href="https://www.npmjs.com/package/he">HE NPM</a>.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>isAttributeValue</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">false means that decode() will decode the string as if it were used in a text context in an HTML document. HTML has different rules for parsing character references in attribute values — set this option to true to treat the input string as if it were used as an attribute value.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>strict</code></td>
            

            <td class="type">
            
                
<span class="param-type">Boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>false</code>
                
                </td>
            

            <td class="description last">false means that decode() will decode any HTML text content you feed it, even if it contains any entities that cause parse errors. To throw an error when such invalid HTML is encountered, set the strict option to true. This option makes it possible to use he as part of HTML parsers and HTML validators.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>format</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}}</code>
                
                </td>
            

            <td class="description last">pass an object to enable custom formatting for specific elements. By using the format option, you can specify formatting for these elements: text, image, lineBreak, paragraph, anchor, heading, table, orderedList, unorderedList, listItem, horizontalLine. Each key must be a function which eventually receive elem (the current elem), fn (the next formatting function) and options (the options passed to html-to-text).</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns a string of the plain text, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~languageInfo"><span class="type-signature">(private, inner) </span>languageInfo<span class="signature">(value)</span><span class="type-signature"> &rarr; {Array.&lt;Object>|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line240">line 240</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/rfc5646">rfc5646 NPM</a></li>
        
            <li><a href="https://www.npmjs.com/package/countries-list">countries-list NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Get detailed information based on an RFC5646 tag for region and language
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">ample usage within a JSONata transform to get detailed info with single tag with language only no locale</p>
    
    <pre class="prettyprint"><code>// returns
// result = {
//     "rfc5646": "es",
//     "region": null,
//     "language": {
//       "name": "Spanish",
//       "native": "Español"
//     }
//   }
// }
const jsonata = require('jsonata-extended');
const expr = jsonata('$languageInfo("es")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = {
//     "rfc5646": "es",
//     "region": null,
//     "language": {
//       "name": "Spanish",
//       "native": "Español"
//     }
//   }
// }
const jsonata = require('jsonata-extended');
const expr = jsonata('$languageInfo("es")');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get the region native language name for a locale</p>
    
    <pre class="prettyprint"><code>// returns
// result = "中文"
const jsonata = require('jsonata-extended');
const expr = jsonata('$languageInfo("zh-CN").language.native');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = "中文"
const jsonata = require('jsonata-extended');
const expr = jsonata('$languageInfo("zh-CN").language.native');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get the information for three locales</p>
    
    <pre class="prettyprint"><code>// returns
// result = [
//      {
//         "region": {
//          "name": "United States",
//          "native": "United States",
//          "phone": "1",
//          "continent": "NA",
//          "capital": "Washington D.C.",
//          "currency": "USD,USN,USS",
//          "languages": [
//            "en"
//          ],
//          "emoji": "🇺🇸",
//          "emojiU": "U+1F1FA U+1F1F8"
//        },
//        "language": {
//          "name": "English",
//          "native": "English"
//        },
//        "rfc5646": "en-US"
//      },
//      {
//        "region": {
//          "name": "France",
//          "native": "France",
//          "phone": "33",
//          "continent": "EU",
//          "capital": "Paris",
//          "currency": "EUR",
//          "languages": [
//            "fr"
//          ],
//          "emoji": "🇫🇷",
//          "emojiU": "U+1F1EB U+1F1F7"
//        },
//        "language": {
//          "name": "French",
//          "native": "Français"
//        },
//        "rfc5646": "fr-FR"
//      },
//      {
//        "region": {
//          "name": "China",
//          "native": "中国",
//          "phone": "86",
//          "continent": "AS",
//          "capital": "Beijing",
//          "currency": "CNY",
//          "languages": [
//            "zh"
//          ],
//          "emoji": "🇨🇳",
//          "emojiU": "U+1F1E8 U+1F1F3"
//        },
//        "language": {
//          "name": "Chinese",
//          "native": "中文"
//        },
//        "rfc5646": "zh-CN"
//      }
//    ]
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $allLocales:= ["en-US", "fr-FR", "zh-CN"]; $map($allLocales, function($v, $i, $a) { $languageInfo($v) }) )');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = [
//      {
//         "region": {
//          "name": "United States",
//          "native": "United States",
//          "phone": "1",
//          "continent": "NA",
//          "capital": "Washington D.C.",
//          "currency": "USD,USN,USS",
//          "languages": [
//            "en"
//          ],
//          "emoji": "🇺🇸",
//          "emojiU": "U+1F1FA U+1F1F8"
//        },
//        "language": {
//          "name": "English",
//          "native": "English"
//        },
//        "rfc5646": "en-US"
//      },
//      {
//        "region": {
//          "name": "France",
//          "native": "France",
//          "phone": "33",
//          "continent": "EU",
//          "capital": "Paris",
//          "currency": "EUR",
//          "languages": [
//            "fr"
//          ],
//          "emoji": "🇫🇷",
//          "emojiU": "U+1F1EB U+1F1F7"
//        },
//        "language": {
//          "name": "French",
//          "native": "Français"
//        },
//        "rfc5646": "fr-FR"
//      },
//      {
//        "region": {
//          "name": "China",
//          "native": "中国",
//          "phone": "86",
//          "continent": "AS",
//          "capital": "Beijing",
//          "currency": "CNY",
//          "languages": [
//            "zh"
//          ],
//          "emoji": "🇨🇳",
//          "emojiU": "U+1F1E8 U+1F1F3"
//        },
//        "language": {
//          "name": "Chinese",
//          "native": "中文"
//        },
//        "rfc5646": "zh-CN"
//      }
//    ]
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $allLocales:= ["en-US", "fr-FR", "zh-CN"]; $map($allLocales, function($v, $i, $a) { $languageInfo($v) }) )');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get a new object with the RFC5646 tag, and a string 'region (language)' representing the native locale for three locales</p>
    
    <pre class="prettyprint"><code>// returns
// result = [
//        {
//        "rfc5646": "en-US",
//        "locale": "United States (English)"
//        },
//        {
//        "rfc5646": "fr-FR",
//        "locale": "France (Français)"
//        },
//        {
//        "rfc5646": "zh-CN",
//        "locale": "中国 (中文)"
//        }
//      ]
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $allLocales:= ["en-US", "fr-FR", "zh-CN"]; $map($allLocales, function($v, $i, $a) { ( $lang := $languageInfo($v); { "rfc5646": $lang.rfc5646, "locale" : $lang.region.native &amp; " (" &amp; $lang.language.native &amp;")" })}) )');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = [
//        {
//        "rfc5646": "en-US",
//        "locale": "United States (English)"
//        },
//        {
//        "rfc5646": "fr-FR",
//        "locale": "France (Français)"
//        },
//        {
//        "rfc5646": "zh-CN",
//        "locale": "中国 (中文)"
//        }
//      ]
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $allLocales:= ["en-US", "fr-FR", "zh-CN"]; $map($allLocales, function($v, $i, $a) { ( $lang := $languageInfo($v); { "rfc5646": $lang.rfc5646, "locale" : $lang.region.native &amp; " (" &amp; $lang.language.native &amp;")" })}) )');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">The RFC5646 locales to retrieve detailed information on</td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

    <div class="param-desc usertext">
    
        Will throw an error if the value is not a valid RFC5646 language tag
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    object contain details on the region and language, region is null if language only passed. Returns undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Array.&lt;Object></span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~moment"><span class="type-signature">(private, inner) </span>moment<span class="signature">(&hellip;args)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line378">line 378</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/moment">Moment NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Wrapper around MomentJS <a href="https://www.npmjs.com/package/moment">Moment NPM</a>
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform to get the year of a ISO8601 string</p>
    
    <pre class="prettyprint"><code>// returns
// result = "2017"
const jsonata = require('jsonata-extended');
const expr = jsonata('$moment("2017-02-02T15:49:06Z").year()');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = "2017"
const jsonata = require('jsonata-extended');
const expr = jsonata('$moment("2017-02-02T15:49:06Z").year()');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get the localised Italian month name for a date</p>
    
    <pre class="prettyprint"><code>// returns
// result = "dicembre"
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $momentit := $moment().locale(\"it\"); $momentit.localeData().months($moment(\"12-12-1995\")))');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = "dicembre"
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $momentit := $moment().locale(\"it\"); $momentit.localeData().months($moment(\"12-12-1995\")))');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">The moment parse argument options</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    A moment object
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~momentDuration"><span class="type-signature">(private, inner) </span>momentDuration<span class="signature">(&hellip;args)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line406">line 406</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/moment">Moment NPM</a></li>
        
            <li><a href="https://momentjs.com/docs/#/durations/">Moment Durations</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Wrapper around MomentJS Duration <a href="https://www.npmjs.com/package/moment">Moment NPM</a>
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform to get the total seconds of an ISO8601 duration string</p>
    
    <pre class="prettyprint"><code>// returns
// result = 3730
const jsonata = require('jsonata-extended');
const expr = jsonata('$momentDuration(\"PT1H2M10S\").asSeconds()');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 3730
const jsonata = require('jsonata-extended');
const expr = jsonata('$momentDuration(\"PT1H2M10S\").asSeconds()');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to convert ISO8601 duration string to hh:mm:ss</p>
    
    <pre class="prettyprint"><code>// returns
// result = "74:02:10"
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $duration := $momentDuration(\"P3DT2H2M10S\"); $formatNumber($floor($duration.asHours()),\"#00\") &amp; \":\" &amp; $formatNumber($floor($duration.minutes()),\"00\") &amp; \":\" &amp; $formatNumber($floor($duration.seconds()),\"00\") )');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = "74:02:10"
const jsonata = require('jsonata-extended');
const expr = jsonata('$.( $duration := $momentDuration(\"P3DT2H2M10S\"); $formatNumber($floor($duration.asHours()),\"#00\") &amp; \":\" &amp; $formatNumber($floor($duration.minutes()),\"00\") &amp; \":\" &amp; $formatNumber($floor($duration.seconds()),\"00\") )');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>args</code></td>
            

            <td class="type">
            
                
<span class="param-type">*</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                    &lt;repeatable><br>
                
                </td>
            

            

            <td class="description last">The moment.duration argument options</td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    A moment duration object
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~mustache"><span class="type-signature">(private, inner) </span>mustache<span class="signature">(value=<span class="signature-attributes">opt</span>, template=<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {String|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line434">line 434</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/mustache">Mustache NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Render a mustache template
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform for converting object</p>
    
    <pre class="prettyprint"><code>// returns
// result = 'Martin Holden is a Learner'
const jsonata = require('jsonata-extended');
const expr = jsonata('$mustache( { "name" : "Martin Holden" , "role" : "Learner"}, \"{{name}} is a {{role}}\")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 'Martin Holden is a Learner'
const jsonata = require('jsonata-extended');
const expr = jsonata('$mustache( { "name" : "Martin Holden" , "role" : "Learner"}, \"{{name}} is a {{role}}\")');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform for converting more complex object</p>
    
    <pre class="prettyprint"><code>// returns
// result = '&lt;h1>Nincompoopery: Why Your Customers Hate You--And How to Fix It&lt;/h1>&lt;h2>Authors:&lt;/h2>&lt;ul>&lt;li>John R. Brandt&lt;/li>&lt;/ul>&lt;p>HarperCollins Leadership&amp;copy;2019&lt;/p>'
const jsonata = require('jsonata-extended');
const expr = jsonata('$mustache({ "title" : "Nincompoopery: Why Your Customers Hate You--And How to Fix It", "publication" : { "copyrightYear": 2019, "isbn": "9781400213672", "publisher": "HarperCollins Leadership" } , "authors" : ["John R. Brandt"]}, "&lt;h1>{{title}}&lt;/h1>{{#authors.length}}&lt;h2>Authors:&lt;/h2>&lt;ul>{{#authors}}&lt;li>{{.}}&lt;/li>{{/authors}}&lt;/ul>{{/authors.length}}{{#publication}}&lt;p>{{publisher}}&amp;copy;{{copyrightYear}}&lt;/p>{{/publication}}")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = '&lt;h1>Nincompoopery: Why Your Customers Hate You--And How to Fix It&lt;/h1>&lt;h2>Authors:&lt;/h2>&lt;ul>&lt;li>John R. Brandt&lt;/li>&lt;/ul>&lt;p>HarperCollins Leadership&amp;copy;2019&lt;/p>'
const jsonata = require('jsonata-extended');
const expr = jsonata('$mustache({ "title" : "Nincompoopery: Why Your Customers Hate You--And How to Fix It", "publication" : { "copyrightYear": 2019, "isbn": "9781400213672", "publisher": "HarperCollins Leadership" } , "authors" : ["John R. Brandt"]}, "&lt;h1>{{title}}&lt;/h1>{{#authors.length}}&lt;h2>Authors:&lt;/h2>&lt;ul>{{#authors}}&lt;li>{{.}}&lt;/li>{{/authors}}&lt;/ul>{{/authors.length}}{{#publication}}&lt;p>{{publisher}}&amp;copy;{{copyrightYear}}&lt;/p>{{/publication}}")');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value=</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The object to use with the template</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>template=</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">The template object. For more information see the <a href="https://www.npmjs.com/package/mustache">mustache NPM</a></td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the resulting string, or undefined for undefined value or value for undefined template
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~parsePath"><span class="type-signature">(private, inner) </span>parsePath<span class="signature">(value)</span><span class="type-signature"> &rarr; {Object|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line346">line 346</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://nodejs.org/api/path.html">Node Path</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Parse the supplied path and return the parsed values
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform</p>
    
    <pre class="prettyprint"><code>// returns
result = {
   "base": "page.html",
   "dir": "/p/a/t",
   "ext": ".html",
   "name": "page",
   "root": "/"
}
const jsonata = require('jsonata-extended');
const expr = jsonata('$parsePath("/p/a/t/page.html")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
result = {
   "base": "page.html",
   "dir": "/p/a/t",
   "ext": ".html",
   "name": "page",
   "root": "/"
}
const jsonata = require('jsonata-extended');
const expr = jsonata('$parsePath("/p/a/t/page.html")');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get the file extension</p>
    
    <pre class="prettyprint"><code>// returns
result = ".html"

const jsonata = require('jsonata-extended');
const expr = jsonata('$parsePath("/p/a/t/page.html").ext');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
result = ".html"

const jsonata = require('jsonata-extended');
const expr = jsonata('$parsePath("/p/a/t/page.html").ext');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Properly formatted path</td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

    <div class="param-desc usertext">
    
        Will throw an error if the value is not a valid url
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Returns an object containing the parsed components of the path, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~parseUrl"><span class="type-signature">(private, inner) </span>parseUrl<span class="signature">(value)</span><span class="type-signature"> &rarr; {Object|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line302">line 302</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/url-parse">url-parse NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Parse the supplied URL and return the parsed values
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform</p>
    
    <pre class="prettyprint"><code>// returns
result = {
   "slashes": true,
   "protocol": "http:",
   "hash": "#hash",
   "query": {
     "param1": "string",
     "param2": "true"
   },
   "pathname": "/p/a/t/page.html",
   "auth": "user:pass",
   "host": "host.com:8080",
   "port": "8080",
   "hostname": "host.com",
   "password": "pass",
   "username": "user",
   "origin": "http://host.com:8080",
   "href": "http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash"
 }
const jsonata = require('jsonata-extended');
const expr = jsonata('$parseUrl("http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
result = {
   "slashes": true,
   "protocol": "http:",
   "hash": "#hash",
   "query": {
     "param1": "string",
     "param2": "true"
   },
   "pathname": "/p/a/t/page.html",
   "auth": "user:pass",
   "host": "host.com:8080",
   "port": "8080",
   "hostname": "host.com",
   "password": "pass",
   "username": "user",
   "origin": "http://host.com:8080",
   "href": "http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash"
 }
const jsonata = require('jsonata-extended');
const expr = jsonata('$parseUrl("http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash")');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform to get the hostname</p>
    
    <pre class="prettyprint"><code>// returns
result = "host.com"

const jsonata = require('jsonata-extended');
const expr = jsonata('$parseUrl("http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash").hostname');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
result = "host.com"

const jsonata = require('jsonata-extended');
const expr = jsonata('$parseUrl("http://user:pass@host.com:8080/p/a/t/page.html?param1=string&amp;param2=true#hash").hostname');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            

            

            <td class="description last">Properly formatted URL</td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

    <div class="param-desc usertext">
    
        Will throw an error if the value is not a valid url
    
    </div>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    Returns an object containing the parsed components of the URL, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Object</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~registerWithJSONATA"><span class="type-signature">(inner) </span>registerWithJSONATA<span class="signature">(expression)</span><span class="type-signature"></span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line631">line 631</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/jsonata">JSONata NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Register the functions in this library to the JSONata expression
</div>









    <h5>Example</h5>
    
        <p class="code-caption">Example usage to add the functions in this library to a JSONata expression object, and utilise them</p>
    
    <pre class="prettyprint"><code>const jsonata = require('jsonata');
const jsonataFunctions = require('jsonata-functions');

const expression = jsonata('$htmltotext("&lt;p>Leadership has a dark side; a &amp;#34;leadership shadow&amp;#34; that often creates an unknown; lurking fear.&lt;/p>")');
jsonataFunctions.registerWithJSONATA(expression);
const result = expression.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">const jsonata = require('jsonata');
const jsonataFunctions = require('jsonata-functions');

const expression = jsonata('$htmltotext("&lt;p>Leadership has a dark side; a &amp;#34;leadership shadow&amp;#34; that often creates an unknown; lurking fear.&lt;/p>")');
jsonataFunctions.registerWithJSONATA(expression);
const result = expression.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>expression</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            

            

            <td class="description last">The JSONata Expression Object <a href="https://www.npmjs.com/package/jsonata">JSONata NPM</a></td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc usertext">
        expression must be a JSONata expression object
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl class="param-type">
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">TypeError</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    





        
            

    

    <h4 class="name" id="~shortenUuid"><span class="type-signature">(private, inner) </span>shortenUuid<span class="signature">(value, base<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {String|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line91">line 91</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/uuid-encoder">uuid-encoder NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Shorten the supplied UUID
</div>









    <h5>Example</h5>
    
        <p class="code-caption">Example usage within a JSONata transform</p>
    
    <pre class="prettyprint"><code>// returns
// result = '1m5otdkthiyq143crwujacdqg'
const jsonata = require('jsonata-extended');
const expr = jsonata('$shortenUuid("1b49aa30-e719-11e6-9835-f723b46a2688"), "base36"');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = '1m5otdkthiyq143crwujacdqg'
const jsonata = require('jsonata-extended');
const expr = jsonata('$shortenUuid("1b49aa30-e719-11e6-9835-f723b46a2688"), "base36"');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">Properly formatted UUID</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>base</code></td>
            

            <td class="type">
            
                
<span class="param-type">'base2'</span>
|

<span class="param-type">'base10'</span>
|

<span class="param-type">'base16'</span>
|

<span class="param-type">'base32'</span>
|

<span class="param-type">'base36'</span>
|

<span class="param-type">'base58'</span>
|

<span class="param-type">'base62'</span>
|

<span class="param-type">'base64'</span>
|

<span class="param-type">'base64url'</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>'base36'</code>
                
                </td>
            

            <td class="description last">A valid base to use for the process, case sensitive <a href="https://www.npmjs.com/package/uuid-encoder#encoding">Encoding Options</a></td>
        </tr>

    
    </tbody>
</table>














<h5>Throws:</h5>
<ul>
        <li>

    <div class="param-desc usertext">
    
        Will throw an error if the value is not a valid uuid
    
    </div>

</li>
    
        <li>

    <div class="param-desc usertext">
    
        Will throw an error if the base is not a valid option
    
    </div>

</li>
    </ul>


<h5>Returns:</h5>

        
<div class="param-desc">
    Returns a string containing the encoded version of the uuid, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~truncate"><span class="type-signature">(private, inner) </span>truncate<span class="signature">(value<span class="signature-attributes">opt</span>, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {String|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line528">line 528</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>





<div class="description usertext">
    Truncate the string
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform for length of 13</p>
    
    <pre class="prettyprint"><code>// returns
// result = '1234567890...'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate("1234567890123456789012345678901234567890", {"length": 13, "omission": "..."})');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = '1234567890...'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate("1234567890123456789012345678901234567890", {"length": 13, "omission": "..."})');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform for length of 20, and with a list of wordbreaks (these will be trimmed from end if present)</p>
    
    <pre class="prettyprint"><code>// returns
// result = '1234567890123456....'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate('1234567890123456 , 789012345678901234567890', { 'length': 20 , 'omission': '...', 'wordbreakregex': '[\\\\s\\\\.%,:;\\\\?_]'})');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = '1234567890123456....'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate('1234567890123456 , 789012345678901234567890', { 'length': 20 , 'omission': '...', 'wordbreakregex': '[\\\\s\\\\.%,:;\\\\?_]'})');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform for length of 20, and with a single wordbreak (this will be trimmed from end if present)</p>
    
    <pre class="prettyprint"><code>// returns
// result = '1234567890123456....'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate('1234567890123456 , 789012345678901234567890', { 'length': 20 , 'omission': '...', 'wordbreak': ' ' })');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = '1234567890123456....'
const jsonata = require('jsonata-extended');
const expr = jsonata('$truncate('1234567890123456 , 789012345678901234567890', { 'length': 20 , 'omission': '...', 'wordbreak': ' ' })');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>''</code>
                
                </td>
            

            <td class="description last">The string to truncate.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">The options object.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>length</code></td>
            

            <td class="type">
            
                
<span class="param-type">number</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>30</code>
                
                </td>
            

            <td class="description last">The maximum string length.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>omission</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>'...'</code>
                
                </td>
            

            <td class="description last">The string to indicate text is omitted.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>wordbreak</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The wordbreak strings to truncate to.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>wordbreakregex</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last">The string representation of the regex</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the truncated string, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
            

    

    <h4 class="name" id="~unicodeToASCII"><span class="type-signature">(private, inner) </span>unicodeToASCII<span class="signature">(value<span class="signature-attributes">opt</span>, options<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {String|Void}</span></h4>

    




<dl class="details">

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="jsonata-functions.js.html">jsonata-functions.js</a>, <a href="jsonata-functions.js.html#line480">line 480</a>
    </li></ul></dd>
    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="https://www.npmjs.com/package/fold-to-ascii">fold-to-ascii NPM</a></li>
        </ul>
    </dd>
    

    
</dl>





<div class="description usertext">
    Convert UNICODE String to ASCII
Converts alphabetic, numeric, and symbolic Unicode characters which are not in the first 127 ASCII characters (the "Basic Latin" Unicode block) into their ASCII equivalents.
</div>









    <h5>Examples</h5>
    
        <p class="code-caption">Example usage within a JSONata transform</p>
    
    <pre class="prettyprint"><code>// returns
// result = 'Lorem 🤧 eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît")');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 'Lorem 🤧 eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît")');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform with replacement of Unknown characters</p>
    
    <pre class="prettyprint"><code>// returns
// result = 'Lorem  eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît", { "replacement": ""})');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 'Lorem  eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît", { "replacement": ""})');
const result = expr.evaluate();</pre>

        <p class="code-caption">Example usage within a JSONata transform with replacement of Unknown characters, most UNICODE characters are 2 bytes long the UTF8 Encoding for this emoji is 0xF0 0x9F 0xA4 0xA7</p>
    
    <pre class="prettyprint"><code>// returns
// result = 'Lorem XX eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît", { "replacement": "X"})');
const result = expr.evaluate();</code></pre>
    <h5>Try on RUNKIT</h5>
    <pre class="embedrunkit">// returns
// result = 'Lorem XX eripuit'
const jsonata = require('jsonata-extended');
const expr = jsonata('$unicodeToASCII("Lörem 🤧 ëripuît", { "replacement": "X"})');
const result = expr.evaluate();</pre>




    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>value</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>''</code>
                
                </td>
            

            <td class="description last">The UNICODE string to convert.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>{}</code>
                
                </td>
            

            <td class="description last">The options object.
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>replacement</code></td>
            

            <td class="type">
            
                
<span class="param-type">String</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    <code>Void</code>
                
                </td>
            

            <td class="description last">The string to replace unknown UNICODE characters with, each byte of the UNICODE string is replaced if Void then unknown characters are maintained.</td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>
















<h5>Returns:</h5>

        
<div class="param-desc">
    Returns the truncated string, or undefined for undefined input
</div>



<dl class="param-type">
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">String</span>
|

<span class="param-type">Void</span>


    </dd>
</dl>

    



        
    

    

    
</article>

</section>





    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


<script>
const elements = [...document.getElementsByClassName('embedrunkit')]
const notebooks = elements.reduce((notebooks, element) => {
    const innerText = element.firstChild
    const currentCell = window.RunKit.createNotebook({
        element,
        source: innerText.textContent,
        // Remove the text content of the pre tag after the embed has loaded
        onLoad: () => innerText.remove()
    })
  return notebooks
}, [])</script>
</body>
</html>